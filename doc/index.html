<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.2.1
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Remote::Runner</h1>

<ul>
<li><a href="http://rubyops.github.com/remote_runner/doc/">doc</a></li>
<li><a href="http://rubyops.github.com/remote_runner/coverage/">cov</a></li>
</ul>

<h1>Usage</h1>

<p>Documentation in progress.</p>

<h2>Remote::Runner</h2>

<p>See <a href="#Remote__Configuration">Remote::Configuration</a> for configuration examples.</p>

<pre class="code ruby"><code>runner = Remote::Runner.new( ... configuration ... )

runner.configuration.commands = &quot;hostname&quot;
runner.run

runner.configuration.commands = &quot;(ps aux | grep nginx &gt; /dev/null) &amp;&amp; echo true&quot;
runner.run

# or
Remote::Runner.new( ... configuration .. ).run
</code></pre>

<h2>Remote::Configuration</h2>

<p>Configuration can be set a number aof ways:</p>

<pre class="code ruby"><code>Remote.configure(&quot;./path/to/config.yml&quot;)

# and/or via a block
Remote.configure do |conf|
  conf.hosts      = [ &quot;host1&quot;, &quot;host2&quot; ]
  conf.commands   = [ &quot;command1&quot;, &quot;command2&quot; ]
  ...
end

# and/or together
Remote.configure(&quot;./path/to/config.yml&quot;) do |conf|
  conf.hosts      = [ &quot;host1&quot;, &quot;host2&quot; ]
  conf.commands   = [ &quot;command1&quot;, &quot;command2&quot; ]
  ...
end

# or through Remote::Runner.new
runner = Remote::Runner.new( file: &quot;./path/to/config.yml&quot;, hosts: ... )
</code></pre>

<h3>Configuration groups</h3>

<p>Configuration.group must always be set programmatically, as it determines which section of the configuration file to be read.</p>

<pre class="code ruby"><code><span class='const'>Remote</span><span class='period'>.</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mygroup</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># or via a block
</span><span class='const'>Remote</span><span class='period'>.</span><span class='id identifier rubyid_configure'>configure</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_conf'>conf</span><span class='op'>|</span>
  <span class='id identifier rubyid_conf'>conf</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mygroup</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># or 
</span><span class='id identifier rubyid_runner'>runner</span> <span class='op'>=</span> <span class='const'>Remote</span><span class='op'>::</span><span class='const'>Runner</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span> <span class='label'>group:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mygroup</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span>
</code></pre>

<h3>ssh_opts valid params</h3>

<ul>
<li>:auth_methods =&gt; an array of authentication methods to try</li>
<li>:compression =&gt; the compression algorithm to use, or true to use whatever is supported.</li>
<li>:compression_level =&gt; the compression level to use when sending data</li>
<li>:config =&gt; set to true to load the default OpenSSH config files (~/.ssh/config, /etc/ssh_config), or to false to not load them, or to a file-name (or array of file-names) to load those specific configuration files. Defaults to true.</li>
<li>:encryption =&gt; the encryption cipher (or ciphers) to use</li>
<li>:forward_agent =&gt; set to true if you want the SSH agent connection to be forwarded</li>
<li>:global<em>known</em>hosts<em>file =&gt; the location of the global known hosts file. Set to an array if you want to specify multiple global known hosts files. Defaults to %w(/etc/ssh/known</em>hosts /etc/ssh/known_hosts2).</li>
<li>:hmac =&gt; the hmac algorithm (or algorithms) to use</li>
<li>:host_key =&gt; the host key algorithm (or algorithms) to use</li>
<li>:host<em>key</em>alias =&gt; the host name to use when looking up or adding a host to a known_hosts dictionary file</li>
<li>:host_name =&gt; the real host name or IP to log into. This is used instead of the host parameter, and is primarily only useful when specified in an SSH configuration file. It lets you specify an “alias”, similarly to adding an entry in /etc/hosts but without needing to modify /etc/hosts.</li>
<li>:kex =&gt; the key exchange algorithm (or algorithms) to use</li>
<li>:keys =&gt; an array of file names of private keys to use for publickey and hostbased authentication</li>
<li>:key_data =&gt; an array of strings, with each element of the array being a raw private key in PEM format.</li>
<li>:keys<em>only =&gt; set to true to use only private keys from keys and key</em>data parameters, even if ssh-agent offers more identities. This option is intended for situations where ssh-agent offers many different identites.</li>
<li>:logger =&gt; the logger instance to use when logging</li>
<li>:paranoid =&gt; either true, false, or :very, specifying how strict host-key verification should be</li>
<li>:passphrase =&gt; the passphrase to use when loading a private key (default is nil, for no passphrase)</li>
<li>:password =&gt; the password to use to login</li>
<li>:port =&gt; the port to use when connecting to the remote host</li>
<li>:properties =&gt; a hash of key/value pairs to add to the new connection’s properties (see Net::SSH::Connection::Session#properties)</li>
<li>:proxy =&gt; a proxy instance (see Proxy) to use when connecting</li>
<li>:rekey<em>blocks</em>limit =&gt; the max number of blocks to process before rekeying</li>
<li>:rekey_limit =&gt; the max number of bytes to process before rekeying</li>
<li>:rekey<em>packet</em>limit =&gt; the max number of packets to process before rekeying</li>
<li>:timeout =&gt; how long to wait for the initial connection to be made</li>
<li>:user =&gt; the user name to log in as; this overrides the user parameter, and is primarily only useful when provided via an SSH configuration file.</li>
<li>:user<em>known</em>hosts<em>file =&gt; the location of the user known hosts file. Set to an array to specify multiple user known hosts files. Defaults to %w(~/.ssh/known</em>hosts ~/.ssh/known_hosts2).</li>
<li>:verbose =&gt; how verbose to be (Logger verbosity constants, Logger::DEBUG is very verbose, Logger::FATAL is all but silent). Logger::FATAL is the default. The symbols :debug, :info, :warn, :error, and :fatal are also supported and are translated to the corresponding Logger constant.</li>
</ul>

<blockquote>
<p>from: <a href="http://net-ssh.github.com/ssh/v2/api/classes/Net/SSH.html#M000002">http://net-ssh.github.com/ssh/v2/api/classes/Net/SSH.html#M000002</a></p>
</blockquote>

<h3>load_config( YAML file ) format example</h3>

<pre class="code ruby"><code>---
default:
  max_threads: 10
  threaded: true
  dry_run: true
  username: jmervine
  hosts:
    - localhost
  commands: 
    - hostname
  ssh_opts: 
    forward_agent: true
    keys: 
      - &quot;~/.ssh/id_rsa&quot;
</code></pre>

<h2>Command Line Examples</h2>

<pre class="code ruby"><code>$ remoterun -h
Usage: remoterun [options]

    -f, --file [file_path]           config file
    -g, --group [config_group]       config group (default: 'default')
    -r, --hosts [host1, host2]       comma delimited list of remote hosts (default: 'localhost')
    -c, --commands [cmd1, cmd2]      comma delimited list of commands
    -u, --username [username]        ssh username
    -i, --ssh-key [file_path]        ssh key path
    -t, --threaded                   run hosts threaded
    -m, --max-threads [thead count]  max threads (default: 5)
    -h, --help                       Show this message
        --version                    Show version

$ remoterun -f ./path/to/file.yml &quot;ps aux | grep unicorn&quot;

$ remoterun -r localhost -c &quot;ps aux | grep unicorn&quot;,&quot;ps aux | grep nginx&quot; -r localhost,www.example.com -i &quot;~/.ssh/foo_rsa&quot;
</code></pre>
</div></div>

    <div id="footer">
  Generated on Wed Aug  8 21:22:51 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.2.1 (ruby-1.9.2).
</div>

  </body>
</html>